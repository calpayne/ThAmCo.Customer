@model ThAmCo.Customer.Web.Models.ProductsDetailsViewModel

@{
    ViewData["Title"] = "Details";
}

<div class="jumbotron">
    <div class="container">
        <h1>@Html.DisplayFor(model => model.Product.Name)</h1>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <img src="//via.placeholder.com/400" class="img-fluid">
        </div>
        <div class="col-md-6">
            <div class="well well-lg">
                <h4>Description</h4>
                <p>@Html.DisplayFor(model => model.Product.Description)</p>
                <hr />
                <div class="row">
                    <div class="col-md-2">
                        <h6>Price</h6>
                        <p>@Html.DisplayFor(model => model.Product.Currency)@Html.DisplayFor(model => model.Product.Price)</p>
                    </div>
                    <div class="col-md-6">
                        <h6>Stock</h6>
                        @if (Model.IsLoggedIn)
                        {
                            <p>@Html.DisplayFor(model => model.Product.StockLevel)</p>
                        }
                        else
                        {
                            <p>Login to view the stock</p>
                        }
                    </div>
                </div>
            </div>
            @if (Model.IsLoggedIn)
            {
                @if (TempData["error"] != null)
                {
                    <p>@TempData["error"]</p>
                }
                <form asp-action="Purchase" class="mt-3">
                    <input type="hidden" class="form-control" id="Id" name="Id" value="@Model.Product.Id" />
                    <div class="form-group">
                        <input type="submit" value="Purchase" class="btn btn-primary" />
                    </div>
                </form>
            }
            else
            {
                <p class="mt-3">Login to purchase this product</p>
            }
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <h3 class="mt-5">Reviews</h3>
        </div>
        <partial name="_ReviewsList" model="Model.Reviews" />
    </div>
</div>